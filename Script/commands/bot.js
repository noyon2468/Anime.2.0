const fs = require("fs-extra");
const axios = require("axios");
const path = __dirname + "/../../data/teach.json";

module.exports.config = {
  name: "obot",
  version: "3.0.0",
  credits: "à¦¨à§‚à¦° à¦®à§‹à¦¹à¦¾à¦®à§à¦®à¦¦",
  description: "à¦¨à§‚à¦° à¦®à§‹à¦¹à¦¾à¦®à§à¦®à¦¦à§‡à¦° Obot system - teach + fun + AI reply",
  hasPermssion: 0,
  usePrefix: false,
  commandCategory: "no-prefix",
  usages: "auto smart reply",
  cooldowns: 2
};

module.exports.handleEvent = async function ({ event, api }) {
  const msg = event.body?.toLowerCase();
  if (!msg || msg.length > 150) return;

  // ========== âœ… Teach Reply Check ==========
  let teachData = {};
  if (fs.existsSync(path)) {
    teachData = JSON.parse(fs.readFileSync(path));
  }

  if (teachData[msg]) {
    return api.sendMessage(teachData[msg], event.threadID, event.messageID);
  }

  // ========== ðŸ˜ Fun Personality Replies ==========
  const tl = [
    "à¦¬à§‡à¦¶à¦¿ Bot Bot à¦•à¦°à¦²à§‡ leave à¦¨à¦¿à¦¬à§‹ à¦•à¦¿à¦¨à§à¦¤à§ ðŸ˜’ðŸ˜’",
    "à¦¤à§à¦®à¦¿ à¦†à¦®à¦¾à¦•à§‡ à¦ªà§à¦°à§‡à¦® à¦•à¦°à¦¾à¦‡ à¦¦à¦¾à¦“ à¦¨à¦¿ ðŸ˜¼ðŸ¥º à¦ªà¦šà¦¾ à¦¤à§à¦®à¦¿!",
    "à¦†à¦®à¦¿ à¦†à¦¬à¦¾à¦² à¦¦à§‡à¦° à¦¸à¦¾à¦¥à§‡ à¦•à¦¥à¦¾ à¦¬à¦²à¦¿ à¦¨à¦¾, ok? ðŸ˜’",
    "à¦à¦¤ à¦¡à§‡à¦•à§‹ à¦¨à¦¾, à¦ªà§à¦°à§‡à¦®à§‡ à¦ªà§œà§‡ à¦¯à¦¾à¦¬à§‹ ðŸ™ˆ",
    "Bolo Babu, à¦¤à§à¦®à¦¿ à¦•à¦¿ à¦†à¦®à¦¾à¦•à§‡ à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à§‹? ðŸ™ˆðŸ’‹",
    "à¦¬à¦¾à¦° à¦¬à¦¾à¦° à¦¡à¦¾à¦•à¦²à§‡ à¦®à¦¾à¦¥à¦¾ à¦—à¦°à¦® à¦¹à§Ÿà§‡ à¦¯à¦¾à§Ÿ à¦•à¦¿à¦¨à§à¦¤à§ ðŸ˜‘",
    "à¦¹à§à¦¯à¦¾à¦ à¦¬à¦²à§‹ ðŸ˜’ à¦¤à§‹à¦®à¦¾à¦° à¦œà¦¨à§à¦¯ à¦•à¦¿ à¦•à¦°à¦¤à§‡ à¦ªà¦¾à¦°à¦¿ ðŸ˜ðŸ˜‘?",
    "à¦à¦¤ à¦¡à¦¾à¦•à¦›à§‹ à¦•à§‡à¦¨? à¦—à¦¾à¦²à¦¿ à¦¶à§à¦¨à¦¬à¦¿ à¦¨à¦¾à¦•à¦¿? ðŸ¤¬",
    "I love you Janu ðŸ¥°",
    "à¦†à¦°à§‡ à¦¬à¦²à§‹ à¦†à¦®à¦¾à¦° à¦œà¦¾à¦¨, à¦•à§‡à¦®à¦¨ à¦†à¦›à§‹? ðŸ˜š",
    "Bot à¦¬à¦²à§‡ à¦…à¦¸à¦®à§à¦®à¦¾à¦¨ à¦•à¦°à¦›à§‹ ðŸ˜°ðŸ˜¿",
    "Hop beda ðŸ˜¾ Boss à¦¬à¦² boss ðŸ˜¼",
    "à¦šà§à¦ª à¦¥à¦¾à¦•, à¦¨à¦¾ à¦¹à¦²à§‡ à¦¦à¦¾à¦à¦¤ à¦­à§‡à¦™à§‡ à¦¦à¦¿à¦¬à§‹ ðŸ˜ ",
    "Bot à¦¨à¦¾, à¦œà¦¾à¦¨à§ à¦¬à¦²à§‹ ðŸ˜˜",
    "Disturb à¦•à¦°à¦›à§‹ à¦•à§‡à¦¨? à¦†à¦®à¦¾à¦° à¦œà¦¾à¦¨à§à¦° à¦¸à¦¾à¦¥à§‡ à¦¬à§à¦¯à¦¸à§à¦¤ à¦†à¦›à¦¿ ðŸ˜‹",
    "à¦¤à§à¦‡ à¦à¦¤ à¦¡à¦¾à¦•à¦¿à¦¸ à¦•à§‡à¦¨ ðŸ¤¬",
    "à¦†à¦®à¦¾à¦•à§‡ à¦¡à¦¾à¦•à¦²à§‡ à¦–à¦¬à¦° à¦†à¦›à§‡ ðŸ˜˜",
    "à¦®à¦œà¦¾ à¦•à¦°à¦¾à¦° à¦®à§à¦¡à§‡ à¦¨à§‡à¦‡, à¦ªà¦°à§‡ à¦¡à¦¾à¦•à¦¿à¦¸ ðŸ˜’",
    "à¦œà¦¾à¦¨à§, à¦à¦‡à¦¦à¦¿à¦•à§‡ à¦†à¦¸à§‹ ðŸ¤­ðŸ˜˜",
    "à¦¦à§‚à¦°à§‡ à¦¯à¦¾, à¦¤à§‹à¦° à¦•à§‹à¦¨à§‹ à¦•à¦¾à¦œ à¦¨à¦¾à¦‡, à¦¶à§à¦§à§ bot bot à¦•à¦°à¦¿à¦¸ ðŸ¤£",
    "à¦¤à§‹à¦° à¦•à¦¥à¦¾ à¦¤à§‹à¦° à¦¬à¦¾à§œà¦¿à¦¤à§‡ à¦•à§‡à¦‰ à¦¶à§‹à¦¨à§‡ à¦¨à¦¾, à¦†à¦®à¦¿ à¦¶à§à¦¨à¦¬à§‹ à¦•à§‡à¦¨? ðŸ¤”ðŸ˜‚",
    "à¦•à¦¿ à¦¹à¦²à§‹? à¦®à¦¿à¦¸à§à¦Ÿà§‡à¦• à¦•à¦°à¦›à¦¿à¦¸ à¦¨à¦¾à¦•à¦¿? ðŸ¤£",
    "à¦¬à¦²à§‹, à¦•à¦¿ à¦¬à¦²à¦¬à¦¿? à¦¸à¦¬à¦¾à¦° à¦¸à¦¾à¦®à¦¨à§‡ à¦¬à¦²à¦¬à¦¿ à¦¨à¦¾à¦•à¦¿? ðŸ¤­ðŸ¤",
    "à¦•à¦¾à¦² à¦¦à§‡à¦–à¦¾ à¦•à¦°à¦¿à¦¸, à¦•à¦¿à¦›à§ à¦¬à¦²à¦¾à¦° à¦†à¦›à§‡ ðŸ˜ˆ",
    "à¦¶à§à¦§à§ à¦†à¦®à¦¾à¦•à§‡à¦‡ à¦•à§‡à¦¨ à¦¡à¦¾à¦•à§‹? à¦²à¦œà§à¦œà¦¾ à¦²à¦¾à¦—à§‡ ðŸ™ˆðŸ–¤",
    "à¦†à¦®à¦¾à¦° à¦¬à¦¸ à¦¨à§‚à¦° à¦®à§‹à¦¹à¦¾à¦®à§à¦®à¦¦ à¦à¦° à¦ªà¦•à§à¦· à¦¥à§‡à¦•à§‡ à¦¤à§‹à¦®à¦¾à§Ÿ à¦…à¦¨à§‡à¦• à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¾ ðŸ«¶ðŸ¥°",
    "à¦†à¦®à¦¾à¦° à¦¬à¦¸ à¦¨à§‚à¦° à¦®à§‹à¦¹à¦¾à¦®à§à¦®à¦¦ à¦à¦° à¦œà¦¨à§à¦¯ à¦¦à§‹à§Ÿà¦¾ à¦•à¦°à¦¬à§‡à¦¨ ðŸ’ðŸŒºðŸŒ»",
    "à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¾ à¦¨à¦¾à¦®à¦• à¦†à¦¬à§à¦²à¦¾à¦®à§€ à¦•à¦°à¦¤à§‡ à¦šà¦¾à¦‡à¦²à§‡ à¦‡à¦¨à¦¬à¦•à§à¦¸à§‡ à¦šà¦²à§‡ à¦¯à¦¾à¦“ ðŸ™ŠðŸ¥±ðŸ‘…",
    "à¦œà¦¾à¦¨ à¦¤à§à¦®à¦¿ à¦¶à§à¦§à§ à¦†à¦®à¦¾à¦° â¤ï¸ à¦†à¦®à¦¿ à¦¤à§‹à¦®à¦¾à¦•à§‡ à§©à§¬à§« à¦¦à¦¿à¦¨ à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¿ ðŸŒº",
    "à¦à¦• à¦šà¦¾à¦®à¦š à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¾ à¦¦à¦¿à¦¬à¦¾ ðŸ¤ðŸ»ðŸ™‚",
    "à¦†à¦®à¦¿ à¦¦à§à¦§à§‡à¦° à¦¶à¦¿à¦¶à§ ðŸ˜‡ðŸ¼",
    "à¦†à¦®à¦¾à¦° à¦®à¦¨ à¦–à¦¾à¦°à¦¾à¦ª, à¦•à§‡à¦‰ à¦¡à§‡à¦•à§‹ à¦¨à¦¾ à¦†à¦œà¦•à§‡ ðŸ˜ªðŸ¤§",
    "à¦¹à§à¦¦à¦¾à¦‡ group à¦ à¦†à¦›à¦¿, à¦•à§‡à¦‰ à¦¬à¦²à§‡ à¦¨à¦¾ 'à¦œà¦¾à¦¨ à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¿' ðŸ˜¿",
    "à¦¦à§‡à¦¶à§‡à¦° à¦¸à¦¬ à¦•à¦¿à¦›à§ à¦šà§à¦°à¦¿ à¦¹à¦šà§à¦›à§‡, à¦¶à§à¦§à§ à¦†à¦®à¦¾à¦° à¦¬à¦¸ à¦¨à§‚à¦° à¦®à§‹à¦¹à¦¾à¦®à§à¦®à¦¦ à¦à¦° à¦®à¦¨ à¦›à¦¾à§œà¦¾ ðŸ˜‘",
    "ðŸ«µà¦¤à§‹à¦®à¦¾à¦°à§‡ à¦ªà§à¦°à¦šà§à¦° à¦­à¦¾à¦²à§à¦²à¦¾à¦—à§‡ ðŸ¥µ à¦¸à¦®à§Ÿ à¦®à¦¤à§‹ propose à¦•à¦°à¦®à§ ðŸ˜¼",
    "à¦¬à¦¿à§Ÿà§‡ à¦•à¦°à¦²à§‡ à¦…à¦Ÿà§‹à¦®à§‡à¦Ÿà¦¿à¦• à¦¬à¦¾à¦šà§à¦šà¦¾ à¦¹à§Ÿ à¦¨à¦¾ à¦°à§‡! ðŸ˜…ðŸ™‚",
    "à¦œà¦¾à¦¨à§ à¦¤à§à¦®à¦¿ à¦°à¦¾à¦¨à§à¦¨à¦¾ à¦•à¦°à§‡ à¦°à¦¾à¦–à§‹, à¦†à¦®à¦¿ à¦à¦¸à§‡ à¦–à¦¾à¦¬à§‹ ðŸ˜‹",
    "à¦œà¦¾à¦¨à§ à¦¤à§à¦®à¦¿ à¦•à¦¿ à¦†à¦®à¦¾à§Ÿ à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à§‹? à¦†à¦®à¦¿ à¦¤à§‹ à¦¬à¦¾à¦¸à¦¿ à¦¹à§à¦® ðŸ¥µ",
    "à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¾ à¦ªà¦¾à¦ª ðŸ˜ªðŸ¥± à¦¬à¦¾à¦Ÿ à¦¤à§‹à¦®à¦¾à¦°à¦Ÿà¦¾ à¦®à¦¾à¦« ðŸ˜‹",
    "à¦šà¦¿à¦¨à§à¦¤à¦¾ à¦•à¦‡à¦°à§‹ à¦¨à¦¾, à¦†à¦®à¦¿ à¦¤à§‹ à¦†à¦›à¦¿ ðŸ«¶",
    "à¦†à¦®à¦¾à¦° à¦¸à¦¾à¦¦à¦¾ à¦®à¦¨à§‡ à¦•à§‹à¦¨à§‹ à¦•à¦¾à¦¦à¦¾ à¦¨à¦¾à¦‡ ðŸŒ",
    "à¦¤à§‹à¦®à¦¾à¦° à¦¹à¦¾à¦¸à¦¿à¦Ÿà¦¾à¦‡ à¦†à¦®à¦¾à¦° à¦¸à§à¦– ðŸ¤Žâ˜ºï¸",
    "à¦†à¦®à¦¿ à¦ à¦¿à¦• à¦­à¦¾à¦²à§‹ à¦¥à¦¾à¦•à¦¿, à¦¯à¦–à¦¨ à¦¤à§‹à¦®à¦¾à¦•à§‡ à¦¹à¦¾à¦¸à¦¤à§‡ à¦¦à§‡à¦–à¦¿ ðŸŒ¸",
    "à¦†à¦®à¦¾à¦° à¦—à¦¾à¦°à§à¦²à¦«à§à¦°à§‡à¦¨à§à¦¡ à¦¤à§‹à¦®à¦¾à¦° à¦ªà§‡à¦Ÿà§‡..! ðŸŒšâ›ï¸ðŸŒ¶ï¸",
    "à¦¤à§à¦®à¦¿ à¦•à¦¿ à¦šà§à¦°à¦¿ à¦•à¦°à¦²à¦¾ à¦¸à¦¾à¦¦à¦¿à§Ÿà¦¾à¦° à¦«à¦°à§à¦¸à¦¾ à¦¹à¦¬à¦¾à¦° cream ðŸŒšðŸ¤§",
    "à¦®à¦§à§ à¦®à¦§à§ à¦°à¦¸à¦®à¦¾à¦²à¦¾à¦‡ ðŸ†â›ï¸ðŸ¸",
    "à¦¤à§‹à¦° à¦®à§à¦–à§‡ à¦•à¦¿à¦¸ à¦¦à¦¿à¦¬à§‹? à¦—à¦¨à§à¦§ ðŸ˜¤",
    "à¦•à¦¿à¦°à§‡ à¦¤à§à¦‡ à¦•à¦‡ à¦¯à¦¾à¦¸..! ðŸŒšðŸŒ¶ï¸ðŸ†â›ï¸",
    "à¦¸à¦°à¦¿ à¦¬à¦¸, à¦†à¦° à¦­à§à¦² à¦¹à¦¬à§‡ à¦¨à¦¾ ðŸ¥ºðŸ™",
    "à¦†à¦®à¦¾à¦° à¦¬à¦¸ à¦à¦° à¦¨à¦¾à¦® à¦¨à¦¿à¦²à§‡à¦‡ à¦®à§à¦šà¦•à¦¿ à¦¹à§‡à¦¸à§‡ à¦‰à¦ à¦¿ ðŸ¥°",
    "à¦¨à¦¾à¦®à¦¾à¦œà¦¿ à¦®à¦¾à¦¨à§à¦·à§‡à¦°à¦¾ à¦¸à¦¬à¦šà§‡à§Ÿà§‡ à¦¸à§à¦¨à§à¦¦à¦° ðŸ¦‹ðŸ¥°",
    "à¦†à¦®à¦¿ à¦à¦–à¦¨ à¦¬à¦¸ à¦¨à§‚à¦° à¦®à§‹à¦¹à¦¾à¦®à§à¦®à¦¦ à¦à¦° à¦¸à¦¾à¦¥à§‡ à¦¬à¦¿à¦œà¦¿ à¦†à¦›à¦¿ ðŸ˜",
    "à¦¬à¦‰ à¦¸à§à¦¨à§à¦¦à¦°, à¦¬à¦¾à¦•à¦¿à¦—à§à¦²à§‹ à¦¬à§‡à§Ÿà¦¾à¦‡à¦¨ ðŸ¸ðŸ™ˆ",
    "à¦°à¦¾à¦— à¦•à¦°à§‡ à¦¨à¦¾ à¦¸à§‹à¦¨à¦¾ à¦ªà¦¾à¦–à¦¿ ðŸ¥°",
    "à¦¤à§‹à¦®à¦¾à¦•à§‡ à¦¨à¦¾ à¦ªà§‡à¦²à§‡ à¦…à¦¨à§à¦¯à¦œà¦¨à¦•à§‡ à¦ªà¦¾à¦¤à¦¾à¦¬à§‹ ðŸŒšðŸ¤§",
    "à¦•à¦¿'à¦°à§‡, group à¦ à¦¦à§‡à¦–à¦¿ à¦à¦•à¦Ÿà¦¾à¦“ à¦¬à§‡à¦¡à¦¿ à¦¨à¦¾à¦‡! ðŸ¤¦â€ðŸ¥±ðŸ’¦"
  ];

  const triggerWords = ["bot", "bott", "obot", "ai", "ðŸ¤–", "ðŸ™„", "ðŸ˜’", "à¦¨à§‚à¦° à¦®à§‹à¦¹à¦¾à¦®à§à¦®à¦¦", "nur muhammad"];

  if (triggerWords.some(word => msg.includes(word))) {
    const reply = tl[Math.floor(Math.random() * tl.length)];
    return api.sendMessage(reply, event.threadID, event.messageID);
  }

  // ========== ðŸ§  AI Fallback ==========
  try {
    const res = await axios.get(`https://simsimi.fun/api/v2/?mode=talk&lang=bn&message=${encodeURIComponent(msg)}&filter=false`);
    if (res?.data?.success) {
      return api.sendMessage(`ðŸ¤– ${res.data.success}`, event.threadID, event.messageID);
    }
  } catch (err) {
    return;
  }
};

module.exports.run = () => {};
